{"version":3,"sources":["webpack:///webpack/bootstrap 64d625d10c2d36036796","webpack:///./chart.js","webpack:///./pie_chart.js","webpack:///./modules/tools/extend.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,+BAA+B;AACnD;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA,qBAAoB,+BAA+B;AACnD;AACA;AACA,OAAM;;AAEN;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;AAED;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,U;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,EAAC;;;AAGD;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;;AAEA,MAAK;;AAEL;;AAEA,G","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./out/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 64d625d10c2d36036796\n **/","var Pie = require('./pie_chart.js');\r\nvar extend = require('extend');\r\n//绘制饼状图\r\nvar chart = (function() {\r\n    function chart(options) {\r\n        this.defaultOptions = {\r\n            datas: [1,],\r\n            colors: [\"black\",],\r\n            container: null,\r\n            radius: 0,\r\n            centerPoint: {},\r\n            backgroundColor: \"white\",\r\n            pies: []\r\n        };\r\n\r\n        this.options = extend(this.defaultOptions, options);\r\n    }\r\n\r\n    chart.prototype.draw = function() {\r\n        var pies_data = dataDeal(this.options.datas, this.options.colors);\r\n        var _this = this;\r\n        for (var i = 0; i < pies_data.length; i++) {\r\n            this.options.pies[i] = new Pie({\r\n                container: _this.options.container,\r\n                centerPoint: _this.options.centerPoint,\r\n                radius: _this.options.radius,\r\n                startDegree: pies_data[i].start,\r\n                endDegree: pies_data[i].end,\r\n                color: pies_data[i].color\r\n            });\r\n\r\n            this.options.pies[i].draw();\r\n        }\r\n\r\n        this.options.container.addEventListener('click', function(e){\r\n    \t\tvar x = e.clientX;\r\n    \t\tvar y = e.clientY;\r\n    \t\tfor(var i = 0; i < _this.options.pies.length; i++){\r\n    \t\t\t_this.options.pies[i].click(x, y);\r\n    \t\t}\r\n    \t});\r\n\r\n    \tthis.options.container.addEventListener('mousemove', function(e){\r\n    \t\tvar x = e.clientX;\r\n    \t\tvar y = e.clientY;\r\n    \t\tfor(var i = 0; i < _this.options.pies.length; i++){\r\n    \t\t\t_this.options.pies[i].mouseOver(x, y);\r\n    \t\t}\r\n    \t});\r\n\r\n    }\r\n\r\n    //对给的数据进行处理\r\n    function dataDeal(datas, colors) {\r\n        var pies = [];\r\n        var offsetDegree = 0;\r\n        for (var i = 0; i < datas.length; i++) {\r\n        \tpies[i] = {};\r\n            pies[i].start = offsetDegree;\r\n            if (i != datas.length - 1) {\r\n                pies[i].end = offsetDegree + 2 * Math.PI * datas[i];\r\n            }else{\r\n            \tpies[i].end = 2*Math.PI;\r\n            }\r\n            offsetDegree = pies[i].end;\r\n            pies[i].color = colors[i];\r\n        }\r\n        return pies;\r\n    }\r\n\r\n    return chart;\r\n})();\r\n\r\nwindow.Chart = chart;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./chart.js\n ** module id = 0\n ** module chunks = 0\n **/","var extend = require('extend');\r\n//扇形\r\nvar pie_chart = (function() {\r\n    function pie_chart(options) {\r\n        this.defaultOptions = {\r\n            container: null,\r\n            centerPoint: {},\r\n            radius: 0,\r\n            startDegree: 0,\r\n            endDegree: 0,\r\n            color: \"black\",\r\n            out: false\r\n        };\r\n        this.options = extend(this.defaultOptions, options);\r\n    }\r\n    //根据颜色,圆心，半径,偏移角度和结束角度，画扇形\r\n    pie_chart.prototype.basicDraw = function(color) {\r\n        var ctx = this.options.container.getContext('2d');\r\n        ctx.save();\r\n        //移动旋转，进行扇形的绘制\r\n        ctx.fillStyle = color;\r\n        ctx.strokeStyle = \"white\";\r\n        ctx.translate(this.options.centerPoint.x, this.options.centerPoint.y);\r\n        ctx.rotate(this.options.startDegree);\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(0 + this.options.radius, 0);\r\n        ctx.arc(0, 0, this.options.radius, 0, this.options.endDegree - this.options.startDegree, false);\r\n        ctx.lineTo(0, 0);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.fill();\r\n\r\n        ctx.restore();\r\n    };\r\n    //计算点击产生的角度\r\n    function getDegree(x, y) {\r\n        var pi = Math.PI;\r\n        var degree = 0;\r\n        var k = 0;\r\n        var c = Math.sqrt(x * x + y * y);\r\n        var SinK = y / c;\r\n        var CosK = x / c;\r\n        if (x == 0 && y > 0) {\r\n            degree = pi / 2;\r\n        } else if (x == 0 && y < 0) {\r\n            degree = 3 * pi / 2;\r\n        } else if (x > 0 && y == 0) {\r\n            degree = 0;\r\n        } else if (x < 0 && y == 0) {\r\n            degree = pi;\r\n        }\r\n\r\n        if (c != 0) {\r\n            if (y > 0) {\r\n                degree = Math.acos(CosK);\r\n            } else {\r\n                degree = 2*pi - Math.acos(CosK);\r\n            }\r\n        }\r\n        console.log(degree);\r\n        return degree;\r\n    }\r\n\r\n    //判断canvas被点击，传送过来的x, y，是否在当前扇形区域内\r\n    pie_chart.prototype.inArea = function(screen_x, screen_y) {\r\n            var x = screen_x - this.options.centerPoint.x;\r\n            var y = screen_y - this.options.centerPoint.y;\r\n            var r = this.options.radius;\r\n            if (x * x + y * y <= r * r && (getDegree(x, y) > this.options.startDegree && getDegree(x, y) < this.options.endDegree)) {\r\n\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        //点击事件\r\n    pie_chart.prototype.click = function(x, y) {\r\n        if (this.inArea(x, y)) {\r\n            this.clearPie();\r\n            //对偏移的处理\r\n            this.options.centerPoint.x += (this.options.out ? -1 : 1) * 10 * Math.cos((this.options.endDegree - this.options.startDegree) / 2 + this.options.startDegree);\r\n            this.options.centerPoint.y += (this.options.out ? -1 : 1) * 10 * Math.sin((this.options.endDegree - this.options.startDegree) / 2 + this.options.startDegree);\r\n            this.basicDraw(this.options.color);\r\n            this.options.out = (this.options.out ? false : true);\r\n        } \r\n    }\r\n\r\n    //暴露出的绘图函数\r\n    pie_chart.prototype.draw = function() {\r\n        console.log(this.options);\r\n        this.basicDraw(this.options.color);\r\n    }\r\n\r\n    //鼠标悬停（改进颜色为指定颜色的亮色）\r\n    pie_chart.prototype.mouseOver = function(x, y) {\r\n            if (this.inArea(x, y)) {\r\n                this.basicDraw(\"#eeeeee\");\r\n            } else {\r\n                this.basicDraw(this.options.color);\r\n            }\r\n        }\r\n        //清空指定区域（这里需要改进白色为背景色）\r\n    pie_chart.prototype.clearPie = function() {\r\n        this.basicDraw(\"white\");\r\n    };\r\n\r\n\r\n    return pie_chart;\r\n})();\r\n\r\n\r\nmodule.exports = pie_chart;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./pie_chart.js\n ** module id = 1\n ** module chunks = 0\n **/","/*!\r\n * object-extend\r\n * A well-tested function to deep extend (or merge) JavaScript objects without further dependencies.\r\n *\r\n * http://github.com/bernhardw\r\n *\r\n * Copyright 2013, Bernhard Wanger <mail@bernhardwanger.com>\r\n * Released under the MIT license.\r\n *\r\n * Date: 2013-04-10\r\n */\r\n\r\n\r\n/**\r\n * Extend object a with object b.\r\n *\r\n * @param {Object} a Source object.\r\n * @param {Object} b Object to extend with.\r\n * @returns {Object} a Extended object.\r\n */\r\nmodule.exports = function extend(a, b) {\r\n\r\n    // Don't touch 'null' or 'undefined' objects.\r\n    if (a == null || b == null) {\r\n        return a;\r\n    }\r\n\r\n    // TODO: Refactor to use for-loop for performance reasons.\r\n    Object.keys(b).forEach(function (key) {\r\n\r\n        // Detect object without array, date or null.\r\n        // TODO: Performance test:\r\n        // a) b.constructor === Object.prototype.constructor\r\n        // b) Object.prototype.toString.call(b) == '[object Object]'\r\n        if (Object.prototype.toString.call(b[key]) == '[object Object]') {\r\n            if (Object.prototype.toString.call(a[key]) != '[object Object]') {\r\n                a[key] = b[key];\r\n            } else {\r\n                a[key] = extend(a[key], b[key]);\r\n            }\r\n        } else {\r\n            a[key] = b[key];\r\n        }\r\n\r\n    });\r\n\r\n    return a;\r\n\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/tools/extend.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}